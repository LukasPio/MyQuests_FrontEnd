"use strict";function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:true});exports.openPopup=exports.SHOW_CLASS_TIMEOUT=void 0;var _globalState=_interopRequireDefault(require("../globalState.js"));var _aria=require("./aria.js");var _classes=require("./classes.js");var dom=_interopRequireWildcard(require("./dom/index.js"));var _iosFix=require("./iosFix.js");var _scrollbar=require("./scrollbar.js");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{"default":e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n["default"]=e,t&&t.set(e,n),n}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var SHOW_CLASS_TIMEOUT=exports.SHOW_CLASS_TIMEOUT=10;/**
 * Open popup, add necessary classes and styles, fix scrollbar
 *
 * @param {SweetAlertOptions} params
 */var openPopup=exports.openPopup=function openPopup(params){var container=dom.getContainer();var popup=dom.getPopup();if(typeof params.willOpen==="function"){params.willOpen(popup)}var bodyStyles=window.getComputedStyle(document.body);var initialBodyOverflow=bodyStyles.overflowY;addClasses(container,popup,params);// scrolling is 'hidden' until animation is done, after that 'auto'
setTimeout(function(){setScrollingVisibility(container,popup)},SHOW_CLASS_TIMEOUT);if(dom.isModal()){fixScrollContainer(container,params.scrollbarPadding,initialBodyOverflow);(0,_aria.setAriaHidden)()}if(!dom.isToast()&&!_globalState["default"].previousActiveElement){_globalState["default"].previousActiveElement=document.activeElement}if(typeof params.didOpen==="function"){setTimeout(function(){return params.didOpen(popup)})}dom.removeClass(container,_classes.swalClasses["no-transition"])};/**
 * @param {AnimationEvent} event
 */var swalOpenAnimationFinished=function swalOpenAnimationFinished(event){var popup=dom.getPopup();if(event.target!==popup||!dom.animationEndEvent){return}var container=dom.getContainer();popup.removeEventListener(dom.animationEndEvent,swalOpenAnimationFinished);container.style.overflowY="auto"};/**
 * @param {HTMLElement} container
 * @param {HTMLElement} popup
 */var setScrollingVisibility=function setScrollingVisibility(container,popup){if(dom.animationEndEvent&&dom.hasCssAnimation(popup)){container.style.overflowY="hidden";popup.addEventListener(dom.animationEndEvent,swalOpenAnimationFinished)}else{container.style.overflowY="auto"}};/**
 * @param {HTMLElement} container
 * @param {boolean} scrollbarPadding
 * @param {string} initialBodyOverflow
 */var fixScrollContainer=function fixScrollContainer(container,scrollbarPadding,initialBodyOverflow){(0,_iosFix.iOSfix)();if(scrollbarPadding&&initialBodyOverflow!=="hidden"){(0,_scrollbar.replaceScrollbarWithPadding)(initialBodyOverflow)}// sweetalert2/issues/1247
setTimeout(function(){container.scrollTop=0})};/**
 * @param {HTMLElement} container
 * @param {HTMLElement} popup
 * @param {SweetAlertOptions} params
 */var addClasses=function addClasses(container,popup,params){dom.addClass(container,params.showClass.backdrop);if(params.animation){// this workaround with opacity is needed for https://github.com/sweetalert2/sweetalert2/issues/2059
popup.style.setProperty("opacity","0","important");dom.show(popup,"grid");setTimeout(function(){// Animate popup right after showing it
dom.addClass(popup,params.showClass.popup);// and remove the opacity workaround
popup.style.removeProperty("opacity")},SHOW_CLASS_TIMEOUT);// 10ms in order to fix #2062
}else{dom.show(popup,"grid")}dom.addClass([document.documentElement,document.body],_classes.swalClasses.shown);if(params.heightAuto&&params.backdrop&&!params.toast){dom.addClass([document.documentElement,document.body],_classes.swalClasses["height-auto"])}};