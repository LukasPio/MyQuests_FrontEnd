"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getTemplateParams=void 0;var _params=_interopRequireDefault(require("./params.js"));var _utils=require("./utils.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var swalStringParams=["swal-title","swal-html","swal-footer"];/**
 * @param {SweetAlertOptions} params
 * @returns {SweetAlertOptions}
 */var getTemplateParams=exports.getTemplateParams=function getTemplateParams(params){/** @type {HTMLTemplateElement} */var template=typeof params.template==="string"?document.querySelector(params.template):params.template;if(!template){return{}}/** @type {DocumentFragment} */var templateContent=template.content;showWarningsForElements(templateContent);var result=Object.assign(getSwalParams(templateContent),getSwalFunctionParams(templateContent),getSwalButtons(templateContent),getSwalImage(templateContent),getSwalIcon(templateContent),getSwalInput(templateContent),getSwalStringParams(templateContent,swalStringParams));return result};/**
 * @param {DocumentFragment} templateContent
 * @returns {SweetAlertOptions}
 */var getSwalParams=function getSwalParams(templateContent){var result={};/** @type {HTMLElement[]} */var swalParams=Array.from(templateContent.querySelectorAll("swal-param"));swalParams.forEach(function(param){showWarningsForAttributes(param,["name","value"]);var paramName=param.getAttribute("name");var value=param.getAttribute("value");if(typeof _params["default"][paramName]==="boolean"){result[paramName]=value!=="false"}else if(_typeof(_params["default"][paramName])==="object"){result[paramName]=JSON.parse(value)}else{result[paramName]=value}});return result};/**
 * @param {DocumentFragment} templateContent
 * @returns {SweetAlertOptions}
 */var getSwalFunctionParams=function getSwalFunctionParams(templateContent){var result={};/** @type {HTMLElement[]} */var swalFunctions=Array.from(templateContent.querySelectorAll("swal-function-param"));swalFunctions.forEach(function(param){var paramName=param.getAttribute("name");var value=param.getAttribute("value");result[paramName]=new Function("return ".concat(value))()});return result};/**
 * @param {DocumentFragment} templateContent
 * @returns {SweetAlertOptions}
 */var getSwalButtons=function getSwalButtons(templateContent){var result={};/** @type {HTMLElement[]} */var swalButtons=Array.from(templateContent.querySelectorAll("swal-button"));swalButtons.forEach(function(button){showWarningsForAttributes(button,["type","color","aria-label"]);var type=button.getAttribute("type");result["".concat(type,"ButtonText")]=button.innerHTML;result["show".concat((0,_utils.capitalizeFirstLetter)(type),"Button")]=true;if(button.hasAttribute("color")){result["".concat(type,"ButtonColor")]=button.getAttribute("color")}if(button.hasAttribute("aria-label")){result["".concat(type,"ButtonAriaLabel")]=button.getAttribute("aria-label")}});return result};/**
 * @param {DocumentFragment} templateContent
 * @returns {SweetAlertOptions}
 */var getSwalImage=function getSwalImage(templateContent){var result={};/** @type {HTMLElement} */var image=templateContent.querySelector("swal-image");if(image){showWarningsForAttributes(image,["src","width","height","alt"]);if(image.hasAttribute("src")){result.imageUrl=image.getAttribute("src")}if(image.hasAttribute("width")){result.imageWidth=image.getAttribute("width")}if(image.hasAttribute("height")){result.imageHeight=image.getAttribute("height")}if(image.hasAttribute("alt")){result.imageAlt=image.getAttribute("alt")}}return result};/**
 * @param {DocumentFragment} templateContent
 * @returns {SweetAlertOptions}
 */var getSwalIcon=function getSwalIcon(templateContent){var result={};/** @type {HTMLElement} */var icon=templateContent.querySelector("swal-icon");if(icon){showWarningsForAttributes(icon,["type","color"]);if(icon.hasAttribute("type")){/** @type {SweetAlertIcon} */ // @ts-ignore
result.icon=icon.getAttribute("type")}if(icon.hasAttribute("color")){result.iconColor=icon.getAttribute("color")}result.iconHtml=icon.innerHTML}return result};/**
 * @param {DocumentFragment} templateContent
 * @returns {SweetAlertOptions}
 */var getSwalInput=function getSwalInput(templateContent){var result={};/** @type {HTMLElement} */var input=templateContent.querySelector("swal-input");if(input){showWarningsForAttributes(input,["type","label","placeholder","value"]);/** @type {SweetAlertInput} */ // @ts-ignore
result.input=input.getAttribute("type")||"text";if(input.hasAttribute("label")){result.inputLabel=input.getAttribute("label")}if(input.hasAttribute("placeholder")){result.inputPlaceholder=input.getAttribute("placeholder")}if(input.hasAttribute("value")){result.inputValue=input.getAttribute("value")}}/** @type {HTMLElement[]} */var inputOptions=Array.from(templateContent.querySelectorAll("swal-input-option"));if(inputOptions.length){result.inputOptions={};inputOptions.forEach(function(option){showWarningsForAttributes(option,["value"]);var optionValue=option.getAttribute("value");var optionName=option.innerHTML;result.inputOptions[optionValue]=optionName})}return result};/**
 * @param {DocumentFragment} templateContent
 * @param {string[]} paramNames
 * @returns {SweetAlertOptions}
 */var getSwalStringParams=function getSwalStringParams(templateContent,paramNames){var result={};for(var i in paramNames){var paramName=paramNames[i];/** @type {HTMLElement} */var tag=templateContent.querySelector(paramName);if(tag){showWarningsForAttributes(tag,[]);result[paramName.replace(/^swal-/,"")]=tag.innerHTML.trim()}}return result};/**
 * @param {DocumentFragment} templateContent
 */var showWarningsForElements=function showWarningsForElements(templateContent){var allowedElements=swalStringParams.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(templateContent.children).forEach(function(el){var tagName=el.tagName.toLowerCase();if(!allowedElements.includes(tagName)){(0,_utils.warn)("Unrecognized element <".concat(tagName,">"))}})};/**
 * @param {HTMLElement} el
 * @param {string[]} allowedAttributes
 */var showWarningsForAttributes=function showWarningsForAttributes(el,allowedAttributes){Array.from(el.attributes).forEach(function(attribute){if(allowedAttributes.indexOf(attribute.name)===-1){(0,_utils.warn)(["Unrecognized attribute \"".concat(attribute.name,"\" on <").concat(el.tagName.toLowerCase(),">."),"".concat(allowedAttributes.length?"Allowed attributes are: ".concat(allowedAttributes.join(", ")):"To set the value, use HTML within the element.")])}})};