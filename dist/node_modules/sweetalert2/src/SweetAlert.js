"use strict";function _typeof(o){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=exports.SweetAlert=void 0;var _buttonsHandlers=require("./buttons-handlers.js");var _globalState=_interopRequireDefault(require("./globalState.js"));var instanceMethods=_interopRequireWildcard(require("./instanceMethods.js"));var _keydownHandler=require("./keydown-handler.js");var _popupClickHandler=require("./popup-click-handler.js");var _privateMethods=_interopRequireDefault(require("./privateMethods.js"));var _privateProps=_interopRequireDefault(require("./privateProps.js"));var staticMethods=_interopRequireWildcard(require("./staticMethods.js"));var _DismissReason=require("./utils/DismissReason.js");var _Timer=_interopRequireDefault(require("./utils/Timer.js"));var _aria=require("./utils/aria.js");var dom=_interopRequireWildcard(require("./utils/dom/index.js"));var _inputUtils=require("./utils/dom/inputUtils.js");var _getTemplateParams=require("./utils/getTemplateParams.js");var _openPopup=require("./utils/openPopup.js");var _params=_interopRequireWildcard(require("./utils/params.js"));var _setParameters=_interopRequireDefault(require("./utils/setParameters.js"));var _utils=require("./utils/utils.js");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=_typeof(e)&&"function"!=typeof e)return{"default":e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n["default"]=e,t&&t.set(e,n),n}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor}function _toPropertyKey(t){var i=_toPrimitive(t,"string");return"symbol"==_typeof(i)?i:String(i)}function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}function _classPrivateFieldInitSpec(obj,privateMap,value){_checkPrivateRedeclaration(obj,privateMap);privateMap.set(obj,value)}function _checkPrivateRedeclaration(obj,privateCollection){if(privateCollection.has(obj)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function _classPrivateFieldGet(s,a){return s.get(_assertClassBrand(s,a))}function _classPrivateFieldSet(s,a,r){return s.set(_assertClassBrand(s,a),r),r}function _assertClassBrand(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}/** @type {SweetAlert} */var currentInstance;var _promise=/*#__PURE__*/new WeakMap;var SweetAlert=exports.SweetAlert=/*#__PURE__*/function(){/**
   * @param {...any} args
   * @this {SweetAlert}
   */function SweetAlert(){_classCallCheck(this,SweetAlert);/**
   * @type {Promise<SweetAlertResult>}
   */_classPrivateFieldInitSpec(this,_promise,void 0);// Prevent run in Node env
if(typeof window==="undefined"){return}currentInstance=this;// @ts-ignore
for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var outerParams=Object.freeze(this.constructor.argsToParams(args));/** @type {Readonly<SweetAlertOptions>} */this.params=outerParams;/** @type {boolean} */this.isAwaitingPromise=false;_classPrivateFieldSet(_promise,this,this._main(currentInstance.params))}_createClass(SweetAlert,[{key:"_main",value:function _main(userParams){var mixinParams=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};(0,_params.showWarningsForParams)(Object.assign({},mixinParams,userParams));if(_globalState["default"].currentInstance){var swalPromiseResolve=_privateMethods["default"].swalPromiseResolve.get(_globalState["default"].currentInstance);var isAwaitingPromise=_globalState["default"].currentInstance.isAwaitingPromise;_globalState["default"].currentInstance._destroy();if(!isAwaitingPromise){swalPromiseResolve({isDismissed:true})}if(dom.isModal()){(0,_aria.unsetAriaHidden)()}}_globalState["default"].currentInstance=currentInstance;var innerParams=prepareParams(userParams,mixinParams);(0,_setParameters["default"])(innerParams);Object.freeze(innerParams);// clear the previous timer
if(_globalState["default"].timeout){_globalState["default"].timeout.stop();delete _globalState["default"].timeout}// clear the restore focus timeout
clearTimeout(_globalState["default"].restoreFocusTimeout);var domCache=populateDomCache(currentInstance);dom.render(currentInstance,innerParams);_privateProps["default"].innerParams.set(currentInstance,innerParams);return swalPromise(currentInstance,domCache,innerParams)}// `catch` cannot be the name of a module export, so we define our thenable methods here instead
},{key:"then",value:function then(onFulfilled){return _classPrivateFieldGet(_promise,this).then(onFulfilled)}},{key:"finally",value:function _finally(onFinally){return _classPrivateFieldGet(_promise,this)["finally"](onFinally)}}]);return SweetAlert}();/**
 * @param {SweetAlert} instance
 * @param {DomCache} domCache
 * @param {SweetAlertOptions} innerParams
 * @returns {Promise}
 */var swalPromise=function swalPromise(instance,domCache,innerParams){return new Promise(function(resolve,reject){// functions to handle all closings/dismissals
/**
     * @param {DismissReason} dismiss
     */var dismissWith=function dismissWith(dismiss){instance.close({isDismissed:true,dismiss:dismiss})};_privateMethods["default"].swalPromiseResolve.set(instance,resolve);_privateMethods["default"].swalPromiseReject.set(instance,reject);domCache.confirmButton.onclick=function(){(0,_buttonsHandlers.handleConfirmButtonClick)(instance)};domCache.denyButton.onclick=function(){(0,_buttonsHandlers.handleDenyButtonClick)(instance)};domCache.cancelButton.onclick=function(){(0,_buttonsHandlers.handleCancelButtonClick)(instance,dismissWith)};domCache.closeButton.onclick=function(){dismissWith(_DismissReason.DismissReason.close)};(0,_popupClickHandler.handlePopupClick)(innerParams,domCache,dismissWith);(0,_keydownHandler.addKeydownHandler)(_globalState["default"],innerParams,dismissWith);(0,_inputUtils.handleInputOptionsAndValue)(instance,innerParams);(0,_openPopup.openPopup)(innerParams);setupTimer(_globalState["default"],innerParams,dismissWith);initFocus(domCache,innerParams);// Scroll container to top on open (#1247, #1946)
setTimeout(function(){domCache.container.scrollTop=0})})};/**
 * @param {SweetAlertOptions} userParams
 * @param {SweetAlertOptions} mixinParams
 * @returns {SweetAlertOptions}
 */var prepareParams=function prepareParams(userParams,mixinParams){var templateParams=(0,_getTemplateParams.getTemplateParams)(userParams);var params=Object.assign({},_params["default"],mixinParams,templateParams,userParams);// precedence is described in #2131
params.showClass=Object.assign({},_params["default"].showClass,params.showClass);params.hideClass=Object.assign({},_params["default"].hideClass,params.hideClass);if(params.animation===false){params.showClass={backdrop:"swal2-noanimation"};params.hideClass={}}return params};/**
 * @param {SweetAlert} instance
 * @returns {DomCache}
 */var populateDomCache=function populateDomCache(instance){var domCache={popup:dom.getPopup(),container:dom.getContainer(),actions:dom.getActions(),confirmButton:dom.getConfirmButton(),denyButton:dom.getDenyButton(),cancelButton:dom.getCancelButton(),loader:dom.getLoader(),closeButton:dom.getCloseButton(),validationMessage:dom.getValidationMessage(),progressSteps:dom.getProgressSteps()};_privateProps["default"].domCache.set(instance,domCache);return domCache};/**
 * @param {GlobalState} globalState
 * @param {SweetAlertOptions} innerParams
 * @param {Function} dismissWith
 */var setupTimer=function setupTimer(globalState,innerParams,dismissWith){var timerProgressBar=dom.getTimerProgressBar();dom.hide(timerProgressBar);if(innerParams.timer){globalState.timeout=new _Timer["default"](function(){dismissWith("timer");delete globalState.timeout},innerParams.timer);if(innerParams.timerProgressBar){dom.show(timerProgressBar);dom.applyCustomClass(timerProgressBar,innerParams,"timerProgressBar");setTimeout(function(){if(globalState.timeout&&globalState.timeout.running){// timer can be already stopped or unset at this point
dom.animateTimerProgressBar(innerParams.timer)}})}}};/**
 * @param {DomCache} domCache
 * @param {SweetAlertOptions} innerParams
 */var initFocus=function initFocus(domCache,innerParams){if(innerParams.toast){return}if(!(0,_utils.callIfFunction)(innerParams.allowEnterKey)){blurActiveElement();return}if(!focusButton(domCache,innerParams)){(0,_keydownHandler.setFocus)(-1,1)}};/**
 * @param {DomCache} domCache
 * @param {SweetAlertOptions} innerParams
 * @returns {boolean}
 */var focusButton=function focusButton(domCache,innerParams){if(innerParams.focusDeny&&dom.isVisible(domCache.denyButton)){domCache.denyButton.focus();return true}if(innerParams.focusCancel&&dom.isVisible(domCache.cancelButton)){domCache.cancelButton.focus();return true}if(innerParams.focusConfirm&&dom.isVisible(domCache.confirmButton)){domCache.confirmButton.focus();return true}return false};var blurActiveElement=function blurActiveElement(){if(document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur==="function"){document.activeElement.blur()}};// Dear russian users visiting russian sites. Let's have fun.
if(typeof window!=="undefined"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){var now=new Date;var initiationDate=localStorage.getItem("swal-initiation");if(!initiationDate){localStorage.setItem("swal-initiation","".concat(now))}else if((now.getTime()-Date.parse(initiationDate))/(1000*60*60*24)>3){setTimeout(function(){document.body.style.pointerEvents="none";var ukrainianAnthem=document.createElement("audio");ukrainianAnthem.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3";ukrainianAnthem.loop=true;document.body.appendChild(ukrainianAnthem);setTimeout(function(){ukrainianAnthem.play()["catch"](function(){// ignore
})},2500)},500)}}// Assign instance methods from src/instanceMethods/*.js to prototype
SweetAlert.prototype.disableButtons=instanceMethods.disableButtons;SweetAlert.prototype.enableButtons=instanceMethods.enableButtons;SweetAlert.prototype.getInput=instanceMethods.getInput;SweetAlert.prototype.disableInput=instanceMethods.disableInput;SweetAlert.prototype.enableInput=instanceMethods.enableInput;SweetAlert.prototype.hideLoading=instanceMethods.hideLoading;SweetAlert.prototype.disableLoading=instanceMethods.disableLoading;SweetAlert.prototype.showValidationMessage=instanceMethods.showValidationMessage;SweetAlert.prototype.resetValidationMessage=instanceMethods.resetValidationMessage;SweetAlert.prototype.close=instanceMethods.close;SweetAlert.prototype.closePopup=instanceMethods.closePopup;SweetAlert.prototype.closeModal=instanceMethods.closeModal;SweetAlert.prototype.closeToast=instanceMethods.closeToast;SweetAlert.prototype.rejectPromise=instanceMethods.rejectPromise;SweetAlert.prototype.update=instanceMethods.update;SweetAlert.prototype._destroy=instanceMethods._destroy;// Assign static methods from src/staticMethods/*.js to constructor
Object.assign(SweetAlert,staticMethods);// Proxy to instance methods to constructor, for now, for backwards compatibility
Object.keys(instanceMethods).forEach(function(key){/**
   * @param {...any} args
   * @returns {any | undefined}
   */SweetAlert[key]=function(){if(currentInstance&&currentInstance[key]){var _currentInstance;return(_currentInstance=currentInstance)[key].apply(_currentInstance,arguments)}return null}});SweetAlert.DismissReason=_DismissReason.DismissReason;SweetAlert.version="11.10.6";var _default=exports["default"]=SweetAlert;